<?php

include_once('ding_redia_bapp.features.inc');

function ding_redia_bapp_preprocess_window_no($vars) {
  /*
	if (count($vars['view']->result) > 0) {
    $max_date = 0;
    foreach ($vars['view']->result as $row) {
      if (isset($row->{$vars['element']}) && $row->{$vars['element']} > $max_date) {
        $max_date = $row->{$vars['element']};
      }
    }
    if ($max_date) {
      return date('r', $max_date);
    }
  }
	*/
	return '4';
}


/**
 * Implementation of hook_views_rss_namespaces().
 */
function ding_redia_bapp_views_rss_namespaces() {
  $namespaces['redia-rss'] = array(
    'prefix' => 'xmlns',
    'uri' => 'http://xml.redia.dk/rss',
  );
  return $namespaces;
}

/*
** Implementation of hook_views_rss_item_elements
*/
function ding_redia_bapp_views_rss_item_elements() {
  $elements['redia-rss:display-starttime'] = array(
    'description' => t('Redia RSS display start time'),
  );
  $elements['redia-rss:display-endtime'] = array(
    'description' => t('Redia RSS display end time'),
  );
  /*
	$elements['redia-rss:category-id'] = array(
    'configurable' => FALSE,
    'preprocess functions' => array('ding_redia_bapp_preprocess_window_no'),
  );
	*/
  $elements['redia-rss:media'] = array(
    'description' => t('Redia RSS media'),
  );
  $elements['redia-rss:arrangement-location'] = array(
    'description' => t('Redia RSS event location'),
  );
  $elements['redia-rss:arrangement-starttime'] = array(
    'description' => t('Redia RSS event start time'),
  );
  $elements['redia-rss:arrangement-endtime'] = array(
    'description' => t('Redia RSS event end time'),
  );
	return $elements;
}

/*
 * Implementation of hook_theme
 * See http://views-help.doc.logrus.com/help/views/api-default-views for help with providing default .tpl files for your views 
*/
function ding_redia_bapp_theme($existing) {
    return array(
      'views_view_field__redia_bapp__feed__field_list_image_fid' => array(
        'arguments' => array(
          'view' => NULL,
          'field' => NULL,
          'row' => NULL,
        ),
        'template' => 'views-view-field--redia-bapp--feed--field-list-image-fid',
        'original hook' => 'views_view_field',
        'path' => drupal_get_path('module', 'ding_redia_bapp'),
      ),
      'views_view_field__redia_bapp__feed__tid' => array(
        'arguments' => array(
          'view' => NULL,
          'field' => NULL,
          'row' => NULL,
        ),
        'template' => 'views-view-field--redia-bapp--feed--tid',
        'original hook' => 'views_view_field',
        'path' => drupal_get_path('module', 'ding_redia_bapp'),
      ),
			
			/*
			'views_view_views_rss__redia_bapp__feed' => array(
        'arguments' => array(
          'view' => NULL,
					'options' => NULL, 
					'rows' => NULL, 
					'title' => NULL,
        ),
        'template' => 'views-view-views-rss--redia-bapp--feed',
        'original hook' => 'views_view_views_rss',
        'path' => drupal_get_path('module', 'ding_redia_bapp'),
				'preprocess functions' => array(
          'template_preprocess',
          'template_preprocess_views_view_views_rss',
        ),
      ),
			*/
    );
}